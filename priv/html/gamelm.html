<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Asteroids Arcade (ELM)</title>
    <link rel="icon" type="image/png" href="/icon.png" >
    <style>
        body,
        div:first-child {
          margin: 0;
          height: 100;
        }

        div, canvas {
          margin-left: auto;
          margin-right: auto;
        }
        canvas {
          border: darkred 1px solid;
        }

        body {
            background-color: #0f1213;
        }
      </style>

  </head>
  <body>
    <!--[if lt IE 10]>
      <div class="old-browser-message">
        <div class="header"><div class="nav-back"></div><div class="nav-right"></div> </div>
        <span>This browser is not supported<br/> Please use Google Chrome which can be downloaded free at
          <a href="https://www.google.co.uk/chrome/browser/desktop/">https://www.google.co.uk/chrome/browser/desktop</a>
        </span>
      </div>
    <![endif]-->

    <main></main>
    <script src="/elixoids.js"></script>
    <script>
      var app = Elm.Main.init({ node: document.querySelector("main") });
      var nextGameId = 0;

      function run(url, id) {
        var ws = new WebSocket(url);

        app.ports.addGame.send({
          id: id,
          height: 788,
          width: 1400,
        });

        ws.onmessage = function (message) {
            app.ports.graphicsIn.send({
              id: id,
              frame: message.data
            });
        };
      }

      window.addEventListener('load', function() {
        run(graphicsURL(window.location.href), nextGameId += 1);
        // fullscreenFirstCanvas(document.getElementById("fullscreen"));
      })

    </script>
  </body>
</html>